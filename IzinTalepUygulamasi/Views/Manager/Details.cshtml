@model LeaveRequest

<h1>İzin Talebi Detayları</h1>
<hr />

<div>
    <h4>İzin Talebi Bilgileri</h4>
    <dl class="row">
        <dt class="col-sm-3">Çalışan Adı Soyadı</dt>
        <dd class="col-sm-9">@Model.RequestingEmployee.FullName</dd>

        <dt class="col-sm-3">Çalışan Kullanıcı Adı</dt>
        <dd class="col-sm-9">@Model.RequestingEmployee.Username</dd>

        <dt class="col-sm-3">Talep Tarihi</dt>
        <dd class="col-sm-9">@Model.RequestDate.ToString("g")</dd>

        <dt class="col-sm-3">İzin Türü</dt>
        <dd class="col-sm-9">@Html.DisplayFor(model => model.LeaveType)</dd>

        <dt class="col-sm-3">İzin Tarih Aralığı</dt>
        <dd class="col-sm-9">@Model.StartDate.ToShortDateString() - @Model.EndDate.ToShortDateString()</dd>

        <dt class="col-sm-3">Toplam Süre</dt>
        <dd class="col-sm-9">@((Model.EndDate - Model.StartDate).TotalDays + 1) gün</dd>

        <dt class="col-sm-3">Çalışanın Açıklaması</dt>
        <dd class="col-sm-9 text-break" style="white-space: pre-wrap; word-break: break-word; overflow-wrap: break-word;">@Html.DisplayFor(model => model.Reason)</dd>

        <dt class="col-sm-3">Mevcut Durum</dt>
        <dd class="col-sm-9">
            @if (Model.Status == RequestStatus.PENDING)
            {
                <span class="badge bg-warning text-dark">Beklemede</span>
            }
            else if (Model.Status == RequestStatus.APPROVED)
            {

                <span class="badge bg-success">Onaylandı</span>
            }
            else
            {

                <span class="badge bg-danger">Reddedildi</span>
            }
        </dd>
    </dl>
</div>
<div asp-validation-summary="ModelOnly" class="text-danger"></div>
@if (Model.Status == RequestStatus.PENDING)
{
    <hr />
    <h4>İşlem Yap</h4>
   
    <form asp-action="ProcessRequest" method="post" class="mt-3">
        
        <input type="hidden" name="id" value="@Model.Id" />
        <input type="hidden" name="rowVersion" value="@Convert.ToBase64String(Model.RowVersion)" />

        <div class="mb-3">
            <label for="managerComments" class="form-label"><b>Açıklama</b></label>
            <textarea name="managerComments" class="form-control" rows="3"></textarea>
        </div>

        <div class="form-group">
            <button type="submit" name="decision" value="Approve" class="btn btn-success">Onayla</button>
            <button type="submit" name="decision" value="Reject" class="btn btn-danger">Reddet</button>
        </div>
    </form>
}

<div class="mt-4">
    <a asp-action="Index">Listeye Geri Dön</a>
</div>
